suite: test pvc
templates:
  - pvc.yaml
tests:
  # Test Case: PVC Created When extraInit Defined
  - it: should create pvc when extraInit is defined
    set:
      extraInit:
        modelDownload:
          enabled: true
          image:
            repository: "amazon/aws-cli"
            tag: "2.6.4"
            pullPolicy: "IfNotPresent"
          waitContainer:
            command: ["/bin/bash"]
            args: ["-c", "wait"]
          downloadJob:
            command: ["/bin/bash"]
            args: ["-c", "download"]
        pvcStorage: "10Gi"
    asserts:
      - hasDocuments:
          count: 1
      - isKind:
          of: PersistentVolumeClaim
      - equal:
          path: spec.accessModes[0]
          value: ReadWriteOnce
      - equal:
          path: spec.resources.requests.storage
          value: 10Gi